---
- hosts: localhost
  tasks:
    - name: Test works with an account href
      pureport_network_facts:
        api_base_url: "{{ api_base_url }}"
        api_key: "{{ api_key }}"
        api_secret: "{{ api_secret }}"
        account_href: "{{ account_href }}"
      register: result
    - debug: var=result

    - name: Test that a filter works for the networks
      pureport_network_facts:
        api_base_url: "{{ api_base_url }}"
        api_key: "{{ api_key }}"
        api_secret: "{{ api_secret }}"
        account_href: "{{ account_href }}"
      register: result
    - name: Display all network ids
      debug:
        var: item
      loop: "{{ result.networks | json_query('[*].id') }}"
